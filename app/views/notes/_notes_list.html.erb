
<div class='well'>
  <ul class="list-group">
    <% @scale.notes.order(:frequency).each_with_index do |note, index| %>
      <li class="list-group-item padded">
        <span id="note_freq-<%=note.id%>"><%= note.frequency %></span>
        <% if @scale.user == current_user || !@scale.user %>
          | <%= link_to "Edit", edit_scale_note_path(@scale, note), class: 'stopper', remote: true %> |
          <%= link_to "Delete", scale_note_path(@scale, note), class: 'stopper',
                                   :data => {:confirm => "Are you sure?",
                                                  :method => "delete"}, remote: true %>
        <% end %>
        <%= content_tag :div, class: "freq_information", data: {notes: @scale.notes } do %>
        <% end %>
        <h5>Add notes above this note:</h5>
        <div class="form-row">
          <%= form_tag scale_notes_path(@scale), class: 'stopper form-inline', remote: true do %>
            <div class='form-group'>
              <%= label_tag :third_type, "Third:" %>
              <%= hidden_field_tag 'note_id', note.id %>
              <%= select_tag :third_type, options_for_select([ "Major (5/4)", "Minor (6/5)", "Septimal minor (7/6)"]), class:'form-control' %>
            </div>
            <%= submit_tag "Add", class: "btn btn-outline btn-success btn-sm" %>
          <% end %>
        </div>

        <div class="form-row">
          <%= form_tag scale_notes_path(@scale), class: 'stopper form-inline', remote: true do %>
            <div class='form-group'>
              <%= label_tag :fifth, "Fifth (3/2):" %>
              <%= hidden_field_tag 'fifth' %>
              <%= hidden_field_tag 'note_id', note.id %>
            </div>
            <%= submit_tag "Add", class: "btn btn-outline btn-success btn-sm"%>
          <% end %>
        </div>

        <div class="form-row">
          <%= form_tag scale_notes_path(@scale), class: 'stopper form-inline', remote: true do %>
            <div class="form-group">
              <%= label_tag :seventh_type, "Seventh:" %>
              <%= hidden_field_tag 'note_id', note.id %>
              <%= select_tag :seventh_type, options_for_select([ "Major (15/8)", "Minor (9/5)", "Pythagorean minor (16/9)", "Harmonic minor (7/4)"]), class: 'form-control' %>
            </div>
            <%= submit_tag "Add", class: "btn btn-outline btn-success btn-sm"%>
          <% end %>
        </div>

        <div class="form-row">
          <%= form_tag scale_notes_path(@scale), class: 'stopper form-inline', remote: true do %>
            <div class='form-group'>
              <%= label_tag :octave, "Octave (2/1):" %>
              <%= hidden_field_tag 'octave' %>
              <%= hidden_field_tag 'note_id', note.id %>
            </div>
            <%= submit_tag "Add", class: "btn btn-outline btn-success btn-sm"%>
          <% end %>
        </div>

        <div class="form-row">
          <%= form_tag scale_note_path(@scale, note), class: 'stopper form-inline', method: 'patch', remote: true do %>
            <div class='form-group'>
              <%= hidden_field_tag 'transposition', 'up_octave' %>
            </div>
            <%= submit_tag "octave up", class: "btn btn-outline btn-primary btn-sm"%>
          <% end %>
        </div>

        <div class="form-row">
          <%= form_tag scale_note_path(@scale, note), class: 'stopper form-inline', method: 'patch', remote: true do %>
            <div class='form-group'>
              <%= hidden_field_tag 'transposition', 'down_octave' %>
            </div>
            <%= submit_tag "octave down", class: "btn btn-outline btn-primary btn-sm"%>
          <% end %>
        </div>

        <br>

        <div class="floatRight">
          <button class="note<%=index%> btn btn-success">Play note</button>
        </div>
      </li>

    <% end %>
  </ul>
</div>
